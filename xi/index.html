<h1>Super Xi</h1>

<img id="img" src="normal.jpeg" width="256" onclick="doAction();" />

<div>
Level: <span id="level">0</span>
</div>

<div>
Xi: <span id="point">0</span>
</div>

<hr />

<div>
<img src="item1.jpeg" width="64" onclick="payItem(1, 50);" />
Cost: 50
</div>

<div>
<img src="item2.jpeg" width="64" onclick="payItem(2, 100);" />
Cost: 100
</div>

<div>
<img src="item3.jpeg" width="64" onclick="payItem(3, 250);" />
Cost: 250
</div>

<audio src="snif.mp3" id="snif" />

<script>

var timeAction = null;
var point = 0;
var level = 0;

function payItem(itemId, amount){
	if(point >= amount){
		point -= amount;
		level = itemId;
	}

	document.getElementById("point").innerText = point;
	document.getElementById("level").innerText = level;
}

function doAction(){
	if(timeAction != null){
		clearTimeout(timeAction);
		timeAction = null;
	}

	document.getElementById("snif").play();

	point += (level * 2) + 1;

	document.getElementById("point").innerText = point;

	document.getElementById("img").src = "level" + level + ".jpeg";

	timeAction = setTimeout("setNormal();", 300);
}

function setNormal(){
	timeAction = null;
	document.getElementById("img").src = "normal.jpeg";
}

</script>